# ==============================================================================
# JanusGraph Properties - Production Configuration for Cassandra Backend
# ==============================================================================
# This file configures JanusGraph to use Cassandra (CQL) as the storage backend
# and Lucene for indexing. For production with Elasticsearch, see commented options.
# ==============================================================================

# ==============================================================================
# STORAGE BACKEND - CASSANDRA (CQL)
# ==============================================================================
storage.backend=cql
storage.hostname=cassandra
storage.port=9042

# Keyspace name in Cassandra (will be auto-created if doesn't exist)
storage.cql.keyspace=janusgraph

# Local datacenter (must match Cassandra's datacenter name)
storage.cql.local-datacenter=dc1

# Connection pool settings
storage.cql.max-connections-per-host=32
storage.cql.max-requests-per-connection=1024

# Consistency levels
# LOCAL_ONE: Fast, single replica (good for dev/single node)
# LOCAL_QUORUM: Recommended for production multi-node clusters
storage.cql.read-consistency-level=LOCAL_ONE
storage.cql.write-consistency-level=LOCAL_ONE

# Replication factor (set higher for multi-node clusters)
storage.cql.replication-factor=1

# Connection timeout in milliseconds
storage.connection-timeout=10000

# ==============================================================================
# INDEXING BACKEND - LUCENE (Embedded)
# ==============================================================================
# For production, consider using Elasticsearch instead of Lucene
index.search.backend=lucene
index.search.directory=/var/lib/janusgraph/data/searchindex

# ==============================================================================
# INDEXING BACKEND - ELASTICSEARCH (Alternative for Production)
# ==============================================================================
# Uncomment these and comment out Lucene settings above for Elasticsearch
# index.search.backend=elasticsearch
# index.search.hostname=elasticsearch
# index.search.port=9200
# index.search.elasticsearch.client-only=true

# ==============================================================================
# CACHE CONFIGURATION
# ==============================================================================
# Enable database-level cache
cache.db-cache=true

# Percentage of JVM heap to use for cache (0.25 = 25%)
cache.db-cache-size=0.5

# Time in milliseconds to keep entries in cache
cache.db-cache-time=180000

# Time to wait for cache to clean up on shutdown
cache.db-cache-clean-wait=20

# Transaction-level cache (per-transaction vertex cache)
cache.tx-cache-size=20000

# ==============================================================================
# ID ALLOCATION
# ==============================================================================
# Block size for ID allocation (larger = less contention, more waste)
ids.block-size=100000

# Time to wait for ID authority in milliseconds
ids.authority.wait-time=300

# Renew ID blocks before they're exhausted (percentage)
ids.renew-percentage=0.3

# ==============================================================================
# GRAPH CONFIGURATION
# ==============================================================================
# Allow setting vertex ID on creation (false in production for safety)
graph.set-vertex-id=false

# Allow removal of indexed property keys (false in production)
graph.allow-upgrade=false

# Log transactions
graph.tx.log-tx=false

# ==============================================================================
# QUERY CONFIGURATION
# ==============================================================================
# Force index usage (false allows full scans - set true in production!)
query.force-index=false

# Smart limit for query results
query.smart-limit=true

# Maximum query execution time in milliseconds (0 = no limit)
query.hard-max-limit=100000

# ==============================================================================
# SCHEMA CONFIGURATION
# ==============================================================================
# Constraint schema (false allows creating implicit schema)
schema.constraints=false

# Default schema maker class
schema.default=none

# ==============================================================================
# STORAGE CONFIGURATION
# ==============================================================================
# Batch loading mode (true for bulk imports, false for normal operation)
storage.batch-loading=false

# Lock wait time in milliseconds
storage.lock.wait-time=100

# Number of lock retries
storage.lock.retries=5

# Write-ahead log
storage.write-ahead-log=false

# ==============================================================================
# GREMLIN CONFIGURATION
# ==============================================================================
# Graph name
gremlin.graph=org.janusgraph.core.JanusGraphFactory
